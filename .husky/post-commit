#!/bin/sh

echo ""
echo "============================================================"
echo "üì§ REMINDER: Push your commit to GitHub!"
echo "============================================================"
echo ""
echo "Your commit is saved LOCALLY only."
echo ""

# Count unpushed commits
UNPUSHED=$(git log @{u}.. --oneline 2>/dev/null | wc -l)

if [ "$UNPUSHED" -gt 0 ]; then
  echo "‚ö†Ô∏è  You have $UNPUSHED unpushed commit(s)"
  echo ""
  echo "Recent unpushed commits:"
  git log @{u}.. --oneline --max-count=5 2>/dev/null
  echo ""

  # Prompt for immediate push
  echo -n "Push to GitHub now? (Y/n): "
  read -r response

  if [[ "$response" =~ ^[Yy]?$ ]] || [[ -z "$response" ]]; then
    echo ""
    echo "üöÄ Pushing to GitHub..."
    git push origin main || {
      echo ""
      echo "‚ùå Push failed!"
      echo "   Please push manually: git push origin main"
      exit 0  # Don't fail the commit
    }
    echo ""
    echo "‚úÖ Successfully pushed to GitHub!"
  else
    echo ""
    echo "‚ö†Ô∏è  IMPORTANT: Remember to push before ending your session!"
    echo "   Run: git push origin main"
  fi
else
  echo "‚úÖ All commits are already pushed to remote"
fi

echo ""
echo "============================================================"
